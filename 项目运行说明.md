# 学生管理系统运行说明

## 项目概述

这是一个基于前后端分离架构的学生管理系统：
- **前端**: Vue.js + Element UI (运行在 http://localhost:8080)
- **后端**: Spring Boot + MyBatis (运行在 http://localhost:8085)
- **数据库**: MySQL

## 环境要求

### 必需软件
1. **Java 17** - 后端运行环境
2. **Node.js** (建议 v14+) - 前端运行环境
3. **MySQL** - 数据库
4. **Maven** - Java项目构建工具
5. **IntelliJ IDEA** (可选) - Java开发IDE

### 验证环境安装
```bash
# 检查Java版本
java -version

# 检查Node.js版本
node --version

# 检查npm版本
npm --version

# 检查Maven版本
mvn -version

# 检查MySQL服务状态
mysql --version
```

## 数据库配置

### 1. 启动MySQL服务
```bash
# macOS (使用Homebrew)
brew services start mysql

# 或者手动启动
mysql.server start
```

### 2. 创建数据库和导入数据
```bash
# 连接MySQL
mysql -u root

# 创建数据库
CREATE DATABASE studentms CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

# 退出MySQL
exit

# 导入数据（使用修复后的SQL脚本）
mysql -u root studentms < student_server/sql/studentms_fixed.sql
```

### 3. 验证数据导入
```bash
mysql -u root studentms -e "SHOW TABLES;"
mysql -u root studentms -e "SELECT * FROM t WHERE tid = 666;"
```

## 方式一：使用 IntelliJ IDEA 运行

### 后端配置 (student_server)

1. **打开项目**
   - 启动 IntelliJ IDEA
   - 选择 `File` -> `Open`
   - 选择 `student_server` 文件夹
   - 等待Maven依赖下载完成

2. **配置Java SDK**
   - `File` -> `Project Structure` -> `Project`
   - 设置 Project SDK 为 Java 17
   - 设置 Project language level 为 17

3. **配置运行配置**
   - 找到 `StudentServerApplication.java` 文件
   - 右键选择 `Run 'StudentServerApplication'`
   - 或者点击类文件旁边的绿色运行按钮

4. **验证后端启动**
   - 控制台显示 "Started StudentServerApplication"
   - 访问 http://localhost:8085/info/getCurrentTerm 应该返回 "22-春季学期"

### 前端运行 (student_client)

1. **安装依赖**
   ```bash
   cd student_client
   npm install --legacy-peer-deps
   ```

2. **启动开发服务器**
   ```bash
   # 设置Node.js兼容性环境变量
   export NODE_OPTIONS="--openssl-legacy-provider"
   
   # 启动前端服务器
   npm run serve
   ```

3. **验证前端启动**
   - 浏览器访问 http://localhost:8080
   - 应该看到登录页面

## 方式二：完全使用命令行运行

### 1. 启动后端服务器
```bash
# 进入后端项目目录
cd student_server

# 设置Java环境变量（如果需要）
export JAVA_HOME=/Users/wy770/JDK/17/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH

# 使用Maven启动Spring Boot应用
mvn spring-boot:run
```

### 2. 启动前端服务器（新开终端窗口）
```bash
# 进入前端项目目录
cd student_client

# 设置Node.js环境变量
export NODE_OPTIONS="--openssl-legacy-provider"

# 安装依赖（首次运行）
npm install --legacy-peer-deps

# 启动前端开发服务器
npm run serve
```

## 测试登录

### 可用测试账号

1. **管理员账号**
   - 用户ID: `666`
   - 密码: `admin`
   - 用户类型: `admin`

2. **教师账号**
   - 用户ID: `4`
   - 密码: `123456`
   - 用户类型: `teacher`

3. **学生账号**
   - 用户ID: `1`
   - 密码: `123456`
   - 用户类型: `student`

## 常见问题及解决方案

### 1. 后端无法启动
**问题**: 数据库连接失败
```
解决方案:
1. 确保MySQL服务正在运行
2. 检查 student_server/src/main/resources/application.yml 中的数据库配置
3. 确保数据库密码设置正确（默认为空）
```

### 2. 前端无法启动
**问题**: `Error: error:0308010C:digital envelope routines::unsupported`
```
解决方案:
export NODE_OPTIONS="--openssl-legacy-provider"
```

**问题**: 权限错误 `Permission denied`
```
解决方案:
chmod +x node_modules/.bin/vue-cli-service
```

### 3. 登录失败
**问题**: 网络请求失败或500错误
```
解决方案:
1. 确保后端服务器在8085端口正常运行
2. 检查浏览器控制台的网络请求
3. 确保数据库数据正确导入
```

### 4. 端口冲突
```bash
# 查找占用端口的进程
lsof -i :8080  # 前端端口
lsof -i :8085  # 后端端口

# 杀死进程
kill <PID>
```

## 停止服务

### 停止后端服务器
- 在IDEA中点击红色停止按钮
- 或在命令行中按 `Ctrl+C`

### 停止前端服务器
- 在命令行中按 `Ctrl+C`

### 停止MySQL服务
```bash
# macOS
brew services stop mysql

# 或者
mysql.server stop
```

## 项目结构

```
studentclass/
├── student_client/          # 前端项目
│   ├── src/
│   │   ├── components/      # Vue组件
│   │   ├── views/          # 页面视图
│   │   ├── router/         # 路由配置
│   │   ├── store/          # 状态管理
│   │   ├── App.vue         # 主应用组件
│   │   └── main.js         # 入口文件
│   └── package.json        # 前端依赖配置
└── student_server/         # 后端项目
    ├── src/main/java/com/auggie/student_server/
    │   ├── controller/     # 控制器
    │   ├── service/        # 服务层
    │   ├── mapper/         # 数据访问层
    │   └── entity/         # 实体类
    ├── src/main/resources/
    │   ├── mapper/         # MyBatis映射文件
    │   └── application.yml # 配置文件
    ├── sql/               # 数据库脚本
    └── pom.xml           # Maven依赖配置
```

## 开发说明

- 前端修改代码后会自动热重载
- 后端修改代码后需要重新启动服务器
- 数据库结构修改后需要重新导入SQL脚本

---

**注意**: 首次运行前请确保所有环境都已正确安装和配置！ 